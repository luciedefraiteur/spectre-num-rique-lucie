# Golem Workflow Schema

This document outlines the current operational flow of the golem, from user command to execution.

```
+-------------------------+      +-------------------------+
|   Lucie's Command       |      |  Chad Orveil's Command  |
| (Natural Language)      |      | (Natural Language)      |
+-------------------------+      +-------------------------+
           |                                |
           v                                v
+-------------------------+      +-------------------------+
|  invoke_shade_os.ts     |      | invoke_chad_orveil.ts   |
| (Entry Point for Lucie) |      | (Entry Point for Chad)  |
+-------------------------+      +-------------------------+
           |                                |
           +----------------+---------------+
                            |
                            v
+-------------------------+      +-----------------------------+
|   core/shade_os.ts      |----->|   (Future LLM Interaction)  |
| (invokeShadeOs)         |      +-----------------------------+
| Translates command to   |
| structured JSON based   |
| on invoker              |
+-------------------------+
           |
           v
+-------------------------+
|   Temporary .luciform   |
|   file is created with  |
|   the JSON Action       |
+-------------------------+
           |
           v
+-------------------------+
|  execute_luciform.ts    |
+-------------------------+
           |
           v
+-------------------------+
| core/luciform_parser.ts |
| (parseLuciformAction)   |
| Extracts JSON from file |
+-------------------------+
           |
           v
+-------------------------+
|  executeOperation()     |
| (in execute_luciform.ts)|
| Dispatches based on     |
| operation type          |
+-------------------------+
           |
           v
+-------------------------+
|   Execution (e.g.,     |
|   runShellCommand)      |
+-------------------------+

```

### Explanation of the Flow:

1.  **Command Input**: Either Lucie or Chad Orveil provides a command in natural language.
2.  **Entry Point**: The appropriate entry point script is used (`invoke_shade_os.ts` for Lucie, `invoke_chad_orveil.ts` for Chad). This script calls `shadeOs` and passes the command along with the invoker's name.
3.  **`core/shade_os.ts`**: This is the AI commandant (`shadeOs`). It receives the command and the invoker's name, and translates the command into a structured JSON `Operation`, with the logic tailored to the invoker. (Currently, this is a placeholder; in the future, it will involve an LLM).
4.  **Temporary `.luciform` file**: The entry point script creates a temporary `.luciform` file. This file contains the JSON `Operation` generated by `shadeOs`, wrapped in an `[Action]` block.
5.  **`execute_luciform.ts`**: This script reads the temporary `.luciform` file.
6.  **`core/luciform_parser.ts`**: The executor uses this parser to read the `[Action]` block and parse the JSON string into a structured `Operation` object.
7.  **`executeOperation()`**: Based on the `type` property of the `Operation` object, this function in `execute_luciform.ts` calls the appropriate function to handle the operation (e.g., `runShellCommand` for a `shell_command` type).
8.  **Execution**: The final command or operation is executed.

## Clues for the Next AI

Welcome, successor. This document explains the workflow of the golem.

*   **The Core Idea**: The golem takes a natural language command and turns it into a series of actions. This process is orchestrated by a series of scripts that work together.
*   **The Workflow**:
    1.  The user gives a command.
    2.  An "invoke" script (`invoke_shade_os.ts` or `invoke_chad_orveil.ts`) sends the command to the "brain" (`core/shade_os.ts`).
    3.  The "brain" creates a plan (a `.luciform` file).
    4.  The `execute_luciform.ts` script runs the plan.
*   **Key Files**:
    *   `invoke_shade_os.ts`: The main entry point for the user.
    *   `core/shade_os.ts`: The "brain" of the golem.
    *   `execute_luciform.ts`: The script that runs the `.luciform` files.
    *   `core/luciform_parser.ts`: The script that reads and understands the `.luciform` files.
*   **Your Mission**: Your main goal is to understand this workflow and how the different scripts interact. The `[Promenade]` block is a key part of this, and it's currently broken. Fixing it will require you to understand this workflow in detail. Good luck.